{% extends "app/base.html" %}

{% block head %}
  {% with navInfo="scenario" %}
    {{ block.super }}
  {% endwith %}
{% endblock %}

{% block navbar %}
  {% with navInfo="scenario" scenarioName=current_scenario.name %}
    {{ block.super }}
  {% endwith %}
{% endblock %}

{% block content %}

{% load staticfiles %}

<section id="fh5co-page-scenario" data-section="home"
         data-stellar-background-ratio="0.5" {% if current_scenario.picture %}
         style="background-image:url({{ current_scenario.picture.url }}); {% endif %}">
  <div class="gradient"></div>
  <div class="container">
    <div class="text-wrap">
      <div class="text-inner">
        <div class="row">
          <div class="col-md-8">
            {% if current_scenario %}
            <h1 class="text-left">{{ current_scenario.name }}</h1>
            <!--{% for x in current_scenario.scenario_product_set.products.all %}
        <h2> Scenario-description: {{ x.name }}</h2>
            {% endfor %}-->
            <h3 class="text-left" style="color: #ddd; margin-top: -20px;">{{ current_scenario.provider }}</h3>
            {% endif %}
          </div>

          <div class="col-md-4">
            <div class="panel panel-default pull-right"
                 style="background-color: rgba(245, 245, 245, 0.6); max-width: 200px; max-height: 150px;">
              {% if current_scenario.provider.is_visible %}
              <div class="btn">
                {% else %}
                <div class="panel-body">
                  {% endif %}
                  {% if current_scenario.provider.providerprofile %}
                  <a href="{%  url 'app:provider_profile' current_scenario.provider.providerprofile.url_name %}">
                    {% endif %}
                    <img style="max-height: 100%; max-width: 100%;"
                         {% if current_scenario.provider.is_visible %}
                         onclick="provider()"
                         {% endif %}
                         src="{{ current_scenario.provider.providerprofile.logo_image.url }}"
                         alt="providerImg">
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="slant"></div>
  </div>
</section>

<!-- Scenario description boxes -->
{% with scenarios=current_scenario.scenariodescription_set.all %}
<section id="fh5co-intro" data-section="intro">
  <div class="container">
    <div class="col-md-12">
      <div class="text-inner">
        <div class="row">
          <div class="col-md-12 section-heading text-center">
            <h2 class="to-animate">Beschreibung</h2>
            <div class="row">
              <div class="col-md-8 col-md-offset-2 subtext to-animate">
                <h3>
                  Sieh Dir an wie '{{ current_scenario.name }}' funktioniert. Vielleicht ist es auch etwas für Dich
                </h3>
              </div>
            </div>
          </div>
          <div>
            {% if scenarios %}
            {% for scenario in scenarios %}
            <div class="container-fluid row">
              <div class="panel">
                <div class="panel-body">
                  {% if scenario.left_right %}
                  <div class="col-md-8">
                    <p class="text-justify to-animate">
                      {{scenario.description|safe|linebreaksbr}}
                    </p>
                  </div>
                  {% comment %}
                  <div class="col-md-4">
                    <img style="height:auto; width:100%; margin: 5px;" src="{{scenario.image.url}}"
                         alt="{{scenario.image}}">
                  </div>
                  {% endcomment %}
                  <div class="col-md-4">
                    <a href="{{ scenario.image.url }}" class="fh5co-project-item image-popup to-animate">
                      <img style="height:auto; width:100%; margin: 5px;" src="{{scenario.image.url}}"
                           alt="{{scenario.image.url}}">
                    </a>
                  </div>
                  {% else %}
                  {% comment %}
                  <div class="col-md-4">
                    <img style="height:auto; width:100%; margin: 5px;" src="{{scenario.image.url}}"
                         alt="{{scenario.image}}">
                  </div>
                  {% endcomment %}
                  <div class="col-md-4">
                    <a href="{{ scenario.image.url }}" class="fh5co-project-item image-popup to-animate">
                      <img style="height:auto; width:100%; margin: 5px;" src="{{scenario.image.url}}"
                           alt="{{scenario.image.url}}">
                    </a>
                  </div>
                  <div class="col-md-8">
                    <p class="text-justify">
                      {{scenario.description|safe|linebreaksbr}}
                    </p>
                  </div>
                  {% endif %}
                </div>
              </div>
            </div>
            {% endfor %}
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endwith %}

{% if current_scenario %}


<script src="{% static 'app/assets/js/owl.carousel.min.js' %}"></script>
<script>
  // Owl Carousel

  var owlCarouselFeatureSlide = function () {

    var owl2 = $('.owl-carousel-x');
    owl2.owlCarousel({
      pagination: true,
      autoplay: true,
      navigation: true,
      dots: false,
      stopOnHover: true,
      paginationSpeed: 500,
      items: 3,
      loop: true,
      margin: 0,
      lazyLoad: true,
      responsiveClass: true,
      nav: true,
      smartSpeed: 500,
      navText: [
        "LESS",
        "MEHR"
      ],
      navText: [
        "<i class='ti-arrow-left owl-direction'></i>",
        "<i class='ti-arrow-right owl-direction'></i>"
      ],
      responsive: {
        0: {
          items: 1,
          nav: true
        },
        600: {
          items: 2,
        },
        1000: {
          items: 3,
        }
      }
    });
  };
  $(function () {
    owlCarouselFeatureSlide();
  });
</script>


<section id="fh5co-work" data-section="products">
  <div class="container">
    <div class="row">
      <div class="col-md-12 section-heading text-center">
        <h2 class="to-animate">Produkte</h2>
        <div class="row">
          <div class="col-md-8 col-md-offset-2 subtext to-animate">
            <h3>
              Damit Du dieses Scenario in deinem Smart Home realisieren kannst, schlägt Dir Donaalda folgende Produkte
              vor
            </h3>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12 text-center">
        <div class="owl-carousel-fullwidth fh5co-light-arrow owl-carousel-x">
          {% for product in current_scenario.scenario_product_set.products.all %}
          <div class="item">
            <a href="{% url 'app:product' product.pk %}">
              <div class="col-md-12">
                <div class="card" style="background-color:white; border-radius:5px">
                  <div class="card-block" style="padding-top:10px; padding-bottom:10px">
                    <h4 class="card-title" style="text-align:center; margin-bottom:0">{{ product.name }}</h4>
                    <h6 class="card-subtitle text-muted" style="text-align:center; margin-bottom:0">
                      {{ product.provider }}
                    </h6>
                  </div>
                  <div style="height: 250px;">
                    <img src="{{ product.image1.url }}" alt="" class="center-block"
                         style="max-height: 95%; max-width: 95%;">
                  </div>
                </div>
              </div>
            </a>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</section>

{% endif %}

{% include "app/html_templates/sections/commentSection.html" %}

{% endblock %}
