<md-step label="Spezifisch" md-complete="vm.stepData[2].data.completed"
         ng-disabled="vm.stepProgress < 3">

  <md-step-body>
    <form name="step1" ng-submit="vm.submitCurrentStep(vm.stepData[2].data)">
      <md-content class="md-padding">

        <div flex layout="column" layout-align="space-around start">


          <table style="" flex>
            {% if qs_category_specific %}

            {% for questionstep in qs_category_specific %}

            {% for questionset in questionstep.question_steps.all %}

            <!-- TODO setze visibility im style von jedem div block -->
            <!-- TODO wenn in preferences.html checkbox angeklickt, dann show -->

            {% if forloop.parentloop.counter0|divisibleby:2 %}

            <tr style="" flex>
              <td style="width: 50%;"
                  id="preference-{{ forloop.parentloop.counter0 }}"
                  ng-style="{'visibility': vm.preferences[{{forloop.parentloop.counter0}}]?'visible':'hidden'}">
                <div class="column"
                     style="padding-left: 5%; padding-top: 5%;">
                  <div>
                    <h3>{{ questionset.name }}</h3>
                    {% for question in questionset.question.all %}
                    <h4>{{ question.question_text }}</h4>

                    <div>
                      {% if question.answer_presentation == 'rc' %}
                      <md-radio-group ng-model="vm.stepData[2].data.accommodation_name">
                        {% for answer in question.answer_set.all %}
                        <md-radio-button value='{{ answer.pk }}'>{{ answer.answer_text }}</md-radio-button>
                        {% endfor %}
                      </md-radio-group>
                      {% elif question.answer_presentation == 'mc' %}
                      <md-checkbox-group layout="column">
                        {% for answer in question.answer_set.all %}
                        <md-checkbox ng-model="vm.stepData[2].data.question{{ question.pk }}.answer{{ answer.pk }}"
                                     value='{{ answer.pk }}'>{{ answer.answer_text }}
                        </md-checkbox>
                        {% endfor %}
                      </md-checkbox-group>
                      {% elif question.answer_presentation == 'dc' %}
                      <md-input-container>
                        <md-select ng-model="someModel" placeholder="Select a state">
                          {% for answer in question.answer_set.all %}
                          <md-option value='{{ answer.pk }}'>{{ answer.answer_text }}</md-option>
                          {% endfor %}
                        </md-select>
                      </md-input-container>
                      {% elif question.answer_presentation == 'sc' %}
                      <!-- INPUT SLIDER HERE -->
                      {% elif question.answer_presentation == 'rs' %}
                      <!-- INPUT RANGE SLIDER HERE -->
                      {% endif %}
                    </div>
                  </div>
                  {% endfor %}
                </div>
              </td>

              {% else %}

              <td flex
                  id="preference-{{ forloop.parentloop.counter0 }}"
                  ng-style="{'visibility': vm.preferences[{{forloop.parentloop.counter0}}]?'visible':'hidden'}">
                <div class="column" style="padding-left: 5%; padding-top: -5%;">
                  <div flex>
                    <h3>{{ questionset.name }}</h3>
                    {% for question in questionset.question.all %}
                    <h4>{{ question.question_text }}</h4>
                  </div>
                  <div flex>
                    {% if question.answer_presentation == 'rc' %}
                    <md-radio-group ng-model="vm.stepData[2].data.accommodation_name">
                      {% for answer in question.answer_set.all %}
                      <md-radio-button value='{{ answer.pk }}'>{{ answer.answer_text }}</md-radio-button>
                      {% endfor %}
                    </md-radio-group>
                    {% elif question.answer_presentation == 'mc' %}
                    <md-checkbox-group layout="column">
                      {% for answer in question.answer_set.all %}
                      <md-checkbox ng-model="vm.stepData[2].data.question{{ question.pk }}.answer{{ answer.pk }}"
                                   value='{{ answer.pk }}'>{{ answer.answer_text }}
                      </md-checkbox>
                      {% endfor %}
                    </md-checkbox-group>
                    {% elif question.answer_presentation == 'dc' %}
                    <md-input-container>
                      <md-select ng-model="someModel" placeholder="Select a state">
                        {% for answer in question.answer_set.all %}
                        <md-option value='{{ answer.pk }}'>{{ answer.answer_text }}</md-option>
                        {% endfor %}
                      </md-select>
                    </md-input-container>
                    {% elif question.answer_presentation == 'sc' %}
                    <!-- INPUT SLIDER HERE -->
                    {% elif question.answer_presentation == 'rs' %}
                    <!-- INPUT RANGE SLIDER HERE -->
                    {% endif %}
                  </div>
                </div>

                {% endfor %}
              </td>
            </tr>
            {% endif %}


            {% endfor %}

            {% endfor %}

            {% else %}
            <h2>FUCK THIS</h2>
            {% endif %}
          </table>

        </div>
      </md-content>
      <md-step-actions layout="row">
        <div flex layout="row" layout-align="end top">
          <md-button class="md-warn">
            ABBRECHEN
          </md-button>
          <md-button type="submit"
                     ng-disabled=""
                     class="md-primary md-raised">
            WEITER
          </md-button>
        </div>
      </md-step-actions>
    </form>
  </md-step-body>
</md-step>
